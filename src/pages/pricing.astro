---
import Layout from '../layouts/Layout.astro';

import { Image } from 'astro:assets';

import Navigation from '../components/Navigation.astro';
import Footer from '../components/Footer.astro';

import Button from '../components/Button.astro';

import priceStar from '/src/img/price-star.svg?raw';

import helpIcon from '/src/img/help-circle.svg';

import financeManager from '/src/img/finance-manager.png';
import headOfMarketing from '/src/img/head-of-marketing.png';
import csManager from '/src/img/cs-manager.png';

import Modal from '../components/Modal.astro';

import HireGuyBlock from '../components/HireGuyBlock.astro';

import paTeamImage from '/src/img/pa-hero.png';
import headOfSalesImage from '/src/img/sales-hero.png';

import Tooltip from "../components/Tooltip.astro";

---

<Layout title="Dream Pricing - Priced for every business, open to any business">
	<Navigation />
	<header class="hero-home solo-header text-header">
		<div class="hero-elements main-content">
			<section class="header-text content-title">
				<h1 class="page-title">Dream Pricing</h1>
				<p>Priced for every business, open to any business.</p>
			</section>
		</div>
	</header>
	<main class="pinch-footer pricing-page">
		<section class="main-content new-pricing-cards">
			<article class="content-container">
				<div class="content-title">
					<h2>Build <span class="highlight-title">your team</span>, your way</h2>
					<p>Start with one Pro, then add the whole team.</p>
				</div>
				<div class="new-team-cards">
					<div class="new-team-hire">
						<div class="plan promoted" aria-label="Entrepreneur plan, most popdivar">
							<article aria-labelledby="plan-ent-title" aria-describedby="plan-ent-price plan-ent-trial">
							  <div class="plan-header">
								<Fragment set:html={priceStar} />
								<h3 id="plan-ent-title" class="plan-title">Personal Pro</h3>
								<p class="plan-badge" aria-label="Most popular">Most popular</p>
							  </div>
					  
							  <p id="plan-ent-price" class="plan-price">
								From £20<span class="per">/month</span>
							  </p>
					  
							  <Button
								label="Hire me now"
								href="/get-started"
								target=""
								variant="primary"
								size="medium"
								aria-describedby="plan-ent-trial"
							  />
					  
							  <p id="plan-ent-trial" class="plan-trial">
								<span aria-hidden="true" class="plan-trial-icon" /> 14 days free trial
							  </p>
										
							  <div class="plan-features">
								<p>Armed with the expertise to run the day-to-day of your business. No email goes unanswered, no meeting unbooked. All your company admin just happens, you'll wonder what to do with all that time.</p>
								<a href="/your-ai-pros/personal-pro">Learn more</a>
							  </div>
					  
							  <hr class="plan-sep" aria-hidden="true" />
					  
							  <div class="plan-features">
								<Tooltip text="Base price includes 2,500 messages/ month. Choose your package at sign-up to increase this">
									<span class="plan-details">Usage limits apply<Image src={helpIcon} role="presentation" alt=""/></span>
								  </Tooltip>
							  </div>
							</article>
						  </div>
					</div>
					<div class="new-team-image">
						<Image src={paTeamImage} alt="A picture of a personal assistant team" />
					</div>
				</div>
				<div class="new-team-cards">
					<div class="new-team-hire">
						<div class="plan promoted" aria-label="Entrepreneur plan, most popdivar">
							<article aria-labelledby="plan-ent-title" aria-describedby="plan-ent-price plan-ent-trial">
							  <div class="plan-header">
								<Fragment set:html={priceStar} />
								<h3 id="plan-ent-title" class="plan-title">Sales Pro</h3>
							  </div>
					  
							  <p id="plan-ent-price" class="plan-price">
								From £50<span class="per">/month</span>
							  </p>
					  
							  <Button
								label="Hire me now"
								href="/get-started?pro=sales"
								target=""
								variant="primary"
								size="medium"
								aria-describedby="plan-ent-trial"
							  />
					  
							  <p id="plan-ent-trial" class="plan-trial">
								<span aria-hidden="true" class="plan-trial-icon" /> 14 days free trial
							  </p>
										
							  <div class="plan-features">
								<p>Your Sales Pro has one mission, and that’s growing your business every day. They’ll draft outreach strategies, search high and low for new customers, then create the perfect message to reach those customers.</p>
								<aside><small>Also includes a simple Personal Pro</small></aside>
								<a href="/your-ai-pros/sales-pro">Learn more</a>
							  </div>
					  
							  <hr class="plan-sep" aria-hidden="true" />
					  
							  <div class="plan-features">
								  <Tooltip text="Base price includes 60 contacts/ month. Choose your package at sign-up to increase this">
									<span class="plan-details">Usage limits apply<Image src={helpIcon} role="presentation" alt=""/></span>
								  </Tooltip>
							  </div>
							</article>
						  </div>
					</div>
					<div class="new-team-image">
						<Image src={headOfSalesImage} alt="A picture of a sales team" />
					</div>
				</div>
			</article>
		</section>
		<section class="main-content" aria-labelledby="new-employees-heading">
			<article class="content-container">
				<div class="content-title">
					<h2>Onboarding soon</h2>
				</div>
		  
			  <ul class="employee-card-grid" role="list">
				<!-- Finance Manager -->
				<li class="employee-card">
				  <article class="card">
					<div class="card-header">
					  <figure class="card-figure">
						<img src={financeManager.src} alt="" class="card-figure-img" aria-hidden="true" />
					  </figure>
		  
					  <p class="card-badge" aria-label="Starting soon">
						<span aria-hidden="true">Starting soon</span>
					  </p>
		  
					  <h3 class="card-title">
						Meet your <span class="card-title-accent">Finance Pro</span>
					  </h3>
					</div>
		  
					<div class="card-body">
					  <p>Handles invoicing from start to finish, chases late payments, makes expenses as simple as uploading a receipt, and gives you clear dashboards to plan your growth.</p>
					</div>
		  
					<footer class="card-footer">
						<button class="button secondary medium" data-open-modal="mailing-list-modal">Get notified when they start</button>
					</footer>
				  </article>
				</li>
		  
				<!-- Head of Marketing -->
				<li class="employee-card">
				  <article class="card">
					<div class="card-header">
					  <figure class="card-figure">
						<img src={headOfMarketing.src} alt="" class="card-figure-img" aria-hidden="true" />
					  </figure>
		  
					  <p class="card-badge" aria-label="Starting soon">
						<span aria-hidden="true">Starting soon</span>
					  </p>
		  
					  <h3 class="card-title">
						Meet your <span class="card-title-accent">Marketing Pro</span>
					  </h3>
					</div>
		  
					<div class="card-body">
					  <p>Spreads the word with tailored content calendars, compelling posts, and world-class websites — including SEO that gets you noticed.</p>
					</div>
		  
					<footer class="card-footer">
						<button class="button secondary medium" data-open-modal="mailing-list-modal">Get notified when they start</button>
					</footer>
				  </article>
				</li>
		  
				<!-- CS Manager -->
				<li class="employee-card">
				  <article class="card">
					<div class="card-header">
					  <figure class="card-figure">
						<img src={csManager.src} alt="" class="card-figure-img" aria-hidden="true" />
					  </figure>
		  
					  <p class="card-badge" aria-label="Starting soon">
						<span aria-hidden="true">Starting soon</span>
					  </p>
		  
					  <h3 class="card-title">
						Meet your <span class="card-title-accent">Support Pro</span>
					  </h3>
					</div>
		  
					<div class="card-body">
					  <p>Turns every interaction into a reason to return, keeping conversations smooth, personal, and memorable from first hello to final thank-you.</p>
					</div>
		  
					<footer class="card-footer">
						<button class="button secondary medium" data-open-modal="mailing-list-modal">Get notified when they start</button>
					</footer>
				  </article>
				</li>
			  </ul>
		  
			</article>
		  </section>
		  <HireGuyBlock />
	</main>
	<Footer />

	<Modal id="mailing-list-modal" closeLabel="Close">
		<h2 slot="title">Hire your own Pros</h2>
		<p>We're getting our Pros ready to onboard, get an instant notification when they're ready to hire.</p>
	  
		<div class="modal-form">
		  <!-- Form view -->
		  <form id="contactForm" class="webform" novalidate>
			<!-- honeypot -->
			<input type="text" name="address" tabindex="-1" autocomplete="off" hidden />
	  
			<label>
			  Name
			  <input type="text" name="name" autocomplete="name" required />
			</label>
	  
			<label>
			  Email
			  <input type="email" name="email" autocomplete="email" required />
			</label>
	  
			<label>
			  Company name
			  <input type="text" name="company" autocomplete="organization" />
			</label>
	  
			<label>
			  Phone number
			  <input type="tel" name="phone" autocomplete="tel" inputmode="tel" aria-describedby="phoneHelp" />
			</label>
			<p id="phoneHelp" class="visually-hidden">Include country code if outside the UK.</p>
	  
			<fieldset class="dreamie-radio-group">
			  <legend>Which employees are you most excited by? <span class="muted">(pick all that apply)</span></legend>
			
			  <div class="radio-option">
				<input type="checkbox" id="personal-assistant" name="dreamie" value="Personal Assistant" />
				<label for="personal-assistant">Personal Pro</label>
			  </div>
			  <div class="radio-option">
				<input type="checkbox" id="sales" name="dreamie" value="Head of Sales" />
				<label for="sales">Sales Pro</label>
			  </div>
			  <div class="radio-option">
				<input type="checkbox" id="finance" name="dreamie" value="Finance Manager" />
				<label for="finance">Finance Pro</label>
			  </div>
			  <div class="radio-option">
				<input type="checkbox" id="marketing" name="dreamie" value="Head of Marketing" />
				<label for="marketing">Marketing Pro</label>
			  </div>
			  <div class="radio-option">
				<input type="checkbox" id="cs" name="dreamie" value="Customer Service Manager" />
				<label for="cs">Support Pro</label>
			  </div>
			  <div class="radio-option">
				<input type="checkbox" id="other" name="dreamie" value="Other" />
				<label for="other">Other</label>
			  </div>
			</fieldset>
			
	  
			<button type="submit" class="button secondary" id="submitBtn" aria-live="polite">
			  Get updates
			</button>
	  
			<p id="formStatus" class="form-status" role="status" aria-live="polite"></p>
		  </form>
	  
		  <!-- Success view (hidden until success) -->
		  <div id="successView" class="success-view" hidden>
			<h4 id="successHeading">Thanks — you're on the list</h4>
			<p>While you’re here, follow us on LinkedIn</p>
			<ul class="success-links">
			  <li><a href="https://www.linkedin.com/company/dream-ai-employees">Dream on LinkedIn</a></li>
			</ul>
	  
			<div class="success-actions">
			  <button type="button" class="button" data-close-modal>Close</button>
			</div>
		  </div>
		</div>
	  
		<script is:inline>
		  (function () {
			// Prevent duplicate bindings if this script is included twice
			if (window.__hsMailingInit) return;
			window.__hsMailingInit = true;
		
			const PORTAL_ID = "49000459";
			const FORM_GUID = "4c792f29-f1da-4d96-9151-126ad0262902";
			const HS_URL = `https://api.hsforms.com/submissions/v3/integration/submit/${PORTAL_ID}/${FORM_GUID}`;
		
			const modal       = document.getElementById('mailing-list-modal');
			const form        = modal?.querySelector('#contactForm');
			const btn         = modal?.querySelector('#submitBtn');
			const statusElm   = modal?.querySelector('#formStatus');
			const successView = modal?.querySelector('#successView');
		
			if (!form) return;
			if (form.dataset.bound === '1') return;
			form.dataset.bound = '1';
		
			const getCookie = (name) =>
			  document.cookie.split('; ').find(c => c.startsWith(name + '='))?.split('=')[1];
		
			const setLoading = (loading) => {
			  if (!btn) return;
			  btn.disabled = loading;
			  btn.dataset.originalLabel ??= btn.textContent;
			  btn.textContent = loading ? 'Sending…' : btn.dataset.originalLabel;
			};
		
			const splitName = (full) => {
			  const s = (full || '').trim().replace(/\s+/g, ' ');
			  if (!s) return { first: '', last: '' };
			  const parts = s.split(' ');
			  if (parts.length === 1) return { first: parts[0], last: '' };
			  return { first: parts.slice(0, -1).join(' '), last: parts[parts.length - 1] };
			};
		
			// Map checkbox label/value -> HubSpot CRM option value (from your HS form)
			const OPTION_MAP = {
			  'Personal Pro':        'L6cGUyY3rxjbrVhObJdhj',
			  'Sales Pro':             'heWA2aiKPXyI4gZmUDUmF',   // note: I4
			  'Marketing Pro':         'oqS6sVZIgJPH0sSj37WLH',
			  'Support Pro': 'Ky7KhJjSBxEwocMYR8UOf',
			  'Finance Pro':           'zToAvy_nDQn8MCqsJHTtv',
			  'Something else':            'gRPuHuaxPur2_WQovppri'
			};
		
			form.addEventListener('submit', async (e) => {
			  e.preventDefault();
			  if (statusElm) statusElm.textContent = '';
			  // honeypot
			  if (form.address?.value?.trim()) return;
		
			  setLoading(true);
		
			  try {
				const fd = new FormData(form);
				const fullName = (fd.get('name')  || '').toString().trim();
				const email    = (fd.get('email') || '').toString().trim();
				const company  = (fd.get('company') || '').toString().trim();
				const phone    = (fd.get('phone')   || '').toString().trim();
		
				// Collect all checked checkboxes named "dreamie" and map to CRM values
				const selected = Array.from(form.querySelectorAll('input[name="dreamie"]:checked'))
				  .map(i => OPTION_MAP[i.value])
				  .filter(Boolean);
		
				if (selected.length === 0) {
				  if (statusElm) statusElm.textContent = 'Please pick at least one employee.';
				  setLoading(false);
				  return;
				}
		
				// HubSpot expects semicolon-separated internal option values
				const whichEmployeesValue = selected.join(';');
		
				const { first, last } = splitName(fullName);
		
				const fields = [
				  { name: 'email', value: email },
				  { name: 'firstname', value: first },
				  { name: 'lastname',  value: last },
				  { name: 'which_employees_', value: whichEmployeesValue },
				  { name: 'company', value: company },
				  { name: 'phone',   value: phone },
				].filter(f => f.value !== '');
		
				const context = {
				  hutk: getCookie('hubspotutk') || undefined,
				  pageUri: window.location.href,
				  pageName: document.title
				};
		
				const res = await fetch(HS_URL, {
				  method: 'POST',
				  headers: { 'Content-Type': 'application/json' },
				  body: JSON.stringify({ fields, context })
				});
		
				if (!res.ok) throw new Error('Bad response');
		
				form.hidden = true;
				if (successView) successView.hidden = false;
		
				const heading = successView?.querySelector('#successHeading');
				if (heading) {
				  heading.setAttribute('tabindex', '-1');
				  heading.focus({ preventScroll: true });
				  setTimeout(() => heading.removeAttribute('tabindex'), 100);
				}
				form.reset();
			  } catch {
				if (statusElm) statusElm.textContent = 'Something went wrong. Please try again.';
			  } finally {
				setLoading(false);
			  }
			});
		  })();
		</script>
	  </Modal>
</Layout>