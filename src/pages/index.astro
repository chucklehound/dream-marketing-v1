---
import Layout from "../layouts/Layout.astro";

import Button from "../components/Button.astro";
import Navigation from "../components/Navigation.astro";
import Footer from "../components/Footer.astro";

import chats1 from '/src/img/home-chats.png';
import chats2 from '/src/img/home-chats-2.png';
import chats3 from '/src/img/home-chats-3.png';

import card1 from '/src/img/card-1.png';
import card2 from '/src/img/card-2.png';
import card3 from '/src/img/card-3.png';

import quoteLogo from '/src/img/givewheel-logo.png';

import ctaDreamies from '/src/img/end-cta-guys.png';

// Import dreamie1 to dreamie25 as an array
import dreamie1 from '/src/img/hero-dreamies/dreamie-1.png';
import dreamie2 from '/src/img/hero-dreamies/dreamie-2.png';
import dreamie3 from '/src/img/hero-dreamies/dreamie-3.png';
import dreamie4 from '/src/img/hero-dreamies/dreamie-4.png';
import dreamie5 from '/src/img/hero-dreamies/dreamie-5.png';
import dreamie6 from '/src/img/hero-dreamies/dreamie-6.png';
import dreamie7 from '/src/img/hero-dreamies/dreamie-7.png';
import dreamie8 from '/src/img/hero-dreamies/dreamie-8.png';
import dreamie9 from '/src/img/hero-dreamies/dreamie-9.png';
import dreamie10 from '/src/img/hero-dreamies/dreamie-10.png';
import dreamie11 from '/src/img/hero-dreamies/dreamie-11.png';
import dreamie12 from '/src/img/hero-dreamies/dreamie-12.png';
import dreamie13 from '/src/img/hero-dreamies/dreamie-13.png';
import dreamie14 from '/src/img/hero-dreamies/dreamie-14.png';
import dreamie15 from '/src/img/hero-dreamies/dreamie-15.png';
import dreamie16 from '/src/img/hero-dreamies/dreamie-16.png';
import dreamie17 from '/src/img/hero-dreamies/dreamie-17.png';
import dreamie18 from '/src/img/hero-dreamies/dreamie-18.png';
import dreamie19 from '/src/img/hero-dreamies/dreamie-19.png';
import dreamie20 from '/src/img/hero-dreamies/dreamie-20.png';
import dreamie21 from '/src/img/hero-dreamies/dreamie-21.png';
import dreamie22 from '/src/img/hero-dreamies/dreamie-22.png';
import dreamie23 from '/src/img/hero-dreamies/dreamie-23.png';
import dreamie24 from '/src/img/hero-dreamies/dreamie-24.png';
import dreamie25 from '/src/img/hero-dreamies/dreamie-25.png';

const dreamieImages = [
  dreamie1, dreamie2, dreamie3, dreamie4, dreamie5,
  dreamie6, dreamie7, dreamie8, dreamie9, dreamie10,
  dreamie11, dreamie12, dreamie13, dreamie14, dreamie15,
  dreamie16, dreamie17, dreamie18, dreamie19, dreamie20,
  dreamie21, dreamie22, dreamie23, dreamie24, dreamie25
];

// Just return an array of src strings now
const images = dreamieImages.map((img) => img.src);

import Carousel from '../components/Carousel.astro';

const contentBlocks = [
  {
    image: card1,
    title: 'Just started? Let your Business Manager guide you through all the first steps.',
    subtitle: 'Find out more about your',
    ctaText: 'Business Manager',
    ctaUrl: '/page1',
  },
  {
    image: card2,
    title: 'Need to reach 1,000 new customers in 24 hours? Call your Sales Manager.',
    subtitle: 'Find out more about your',
    ctaText: 'Sales Manager',
    ctaUrl: '/page2',
  },
  {
    image: card2,
    title: 'Trying to automate your social media calendar? Your Marketing Manager makes it easy',
    subtitle: 'Find out more about your',
    ctaText: 'Marketing Manager',
    ctaUrl: '/page2',
  },
  {
    image: card3,
    title: 'Trying to automate your social media calendar? Your Marketing Manager makes it easy',
    subtitle: 'Find out more about your',
    ctaText: 'Marketing Manager',
    ctaUrl: '/page2',
  },
  {
    image: card2,
    title: 'Trying to automate your social media calendar? Your Marketing Manager makes it easy',
    subtitle: 'Find out more about your',
    ctaText: 'Marketing Manager',
    ctaUrl: '/page2',
  },
  // Add more blocks as needed
];
---

<Layout title="AI employees that help your business grow">
  <Navigation />
  <header class="hero-home">
    <div class="hero-elements main-content">
      <section class="header-text">
        <h1 class="page-title">
          AI employees that help you
          <span id="rotating-text">difficult markets</span>
        </h1>
        <div class="actions">
          <Button label="Get started for free" href="/book-meeting" target="_blank" size="medium"
            ></Button>
          <Button
            label="Meet the Dreamies"
            href="/what-we-do"
            target=""
            variant="secondary"
            size="medium"
          />
        </div>
      </section>
      <section class="header-image home-hero">
        <div class="ticker-window">
          <div class="ticker-track">
            {images.map((src, i) => (
              <img class="ticker-img" src={src} alt={`Dreamie ${i + 1}`} />
            ))}
            {images.map((src, i) => (
              <img class="ticker-img" src={src} alt={`Dreamie clone ${i + 1}`} />
            ))}
          </div>
        </div>
      </section>
    </div>
  </header>
  <main>
    <section class="main-content">
      <article class="content-container full-width">
        <div class="content-title">
          <h2>Run your business <br/>like you're <span class="highlight-title">texting a friend</span></h2>
          <p>Dream keeps things simple on the surface, while powerful AI managers handle the hard stuff.</p>
        </div>
        <Carousel items={contentBlocks} />
      </article>
    </section>
    <section class="main-content">
      <article class="full-width-contrast promo-home">
        <div class="content-container">
          <div class="content-title">
            <h2>Dream is your 24/7 <br/><span class="highlight-title">AI powered</span> workforce</h2>
            <p>The employees that you need to reach your business goals, <br/>working for you every hour of every day.</p>
          </div>
        </div>
      </article>
    </section>
    <section class="main-content">
      <article class="content-container">
        <div class="breakout rotating-chats">
          <div class="block" style={`background-image: url(${chats1.src});`}></div>
          <div class="block" style={`background-image: url(${chats2.src});`}></div>
          <div class="block" style={`background-image: url(${chats3.src});`}></div>
        </div>
        <div class="content-title">
          <h2>Built to <span class="highlight-title">handle the things</span> <br/>you don't want to</h2>
          <p>Your AI employees are tailored for your business - they learn what you do, how you speak & how you work. </p>
        </div>
      </article>
    </section>
    <section class="customer-quote main-content"> 
      <article class="quote-body"> 
        <div class="content-title">
          <h2>AI built for <span class="highlight-title">everyone</span></h2>
        </div>
        <blockquote>
          <p>“Dream has been a game-changer for GiveWheel. Their Sales Manager is like a second brain—it finds the right companies, reaches out, follows up, and keeps leads warm. We’re now top of mind for corporate charity campaigns, without stretching our team. It’s taken us from reactive to proactive, without hiring.”</p>

      <cite> 
        <span>Charlie Hart, Co-founder at Givewheel</span> 
        <img src={quoteLogo.src} alt="The logo for Givewheel"> 
      </cite> 
    </blockquote> 
  </article> 
</section>
<section class="final-cta"> 
  <article class="main-content cta-container"> 
    <img src={ctaDreamies.src} alt="The 5 Dreamies of Dream - Business, Sales, Marketing, Finance, and Design" />
    <div class="content-title">
      <h2><span class="highlight-title">Grow your business </span><br/>with Dream</h2>
    </div>
    <Button label="Get started for free" href="/book-meeting" target="_blank" size="medium"
            ></Button> 
          </article> 
    </section>
</main>
    
<Footer />

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const rotatingTextElement = document.getElementById("rotating-text");
      const texts = [
        "start a business",
        "enter new markets",
        "save an hour every day",
        "handle more customers",
      ];
      let index = 0;

      function rotateText() {
        // Fade out
        rotatingTextElement.style.opacity = "0";

        setTimeout(() => {
          // Change text after fade out
          rotatingTextElement.textContent = texts[index];

          // Fade in
          rotatingTextElement.style.opacity = "1";

          // Move to next index, looping back to the start
          index = (index + 1) % texts.length;
        }, 500); // Adjust timing for fade-out before changing text

        // Repeat after 4 seconds
        setTimeout(rotateText, 4000);
      }

      // Start the rotation
      rotateText();
    });
  </script>

<script type="module">
  const ticker = document.getElementById('ticker');
const allImageData = Array.from(ticker.querySelectorAll('img')).map(img => img.dataset.src);

let currentIndex = 0;
const cardWidth = 270;
const gap = 16;
const scrollAmount = cardWidth + gap;

function startSmoothTicker() {
  const interval = 3000;
  const scrollDuration = 400;

  tick(); // start immediately
  setInterval(tick, interval);

  function tick() {
    ticker.scrollBy({ left: scrollAmount, behavior: 'smooth' });

    setTimeout(() => {
      // Get first image
      const first = ticker.firstElementChild;

      // Clone it and place it at the end
      const clone = first.cloneNode(true);
      currentIndex = (currentIndex + 1) % allImageData.length;
      const nextIndex = (currentIndex + ticker.children.length - 1) % allImageData.length;
      clone.src = allImageData[nextIndex];

      // Append the clone, then remove the original
      ticker.appendChild(clone);
      ticker.removeChild(first);

      // No scrollLeft reset needed here — scroll stays visually stable
    }, scrollDuration);
  }
}

window.addEventListener('load', startSmoothTicker);
</script>



<script type="module">
  const target = document.querySelector('.promo-home');

  const observer = new IntersectionObserver(
    ([entry], observer) => {
      if (entry.isIntersecting) {
        target.classList.add('visible');
        observer.unobserve(target); // 🔥 Stop observing after first trigger
      }
    },
    {
      root: null,
      rootMargin: '0px',
      threshold: 0.4
    }
  );

  if (target) observer.observe(target);
</script>


</Layout>
